<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>X-Suit</title>
  
  <link rel="icon" href="../banner/wallpaper/pubg.png" type="image/png">  
  <link rel="stylesheet" href="style-calculator.css"> <!-- 외부 CSS 파일을 불러옴 -->
  
  <script src="../script.js"></script>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4VK413KLDK"></script> 
    
</head>
  
<body>

  <!-- 페이지 헤더 -->
  <header>
  <nav>
    <ul>
      <li><a href="../../">홈</a></li>
      <li><a href="calculator.html">확률 계산기</a></li>
      <!-- 다른 페이지에 대한 메뉴 항목 추가 -->
    </ul>
  </nav>
</header>  <br>

  <h2><span class="highlight-box">X-Suit 계산기</span></h2>
  <p>획득 가능한 교환코인 및 에너지를 계산합니다.</p>
  

  <div class="calculator-container">
    
    <span class="text-category">사용자 예산 (UC)</span>
    <input type="number" id="gameCurrency" name="gameCurrency" step="1000" value="10000" oninput="calculateCoins()">

    <br>
    
    <span class="text-category">이벤트 선택</span>
    <label>
      <input type="checkbox" id="event1" onchange="updateProbabilities('event1')">
      <span id="event1-label"></span>
    </label>

    <label>
      <input type="checkbox" id="event2" onchange="updateProbabilities('event2')">
      <span id="event2-label"></span>
    </label>

    <label>
      <input type="checkbox" id="event3" onchange="updateProbabilities('event3')">
      <span id="event3-label"></span>
    </label>
    
  </div>

      <p id="result"></p>


  <script>
    document.getElementById("gameCurrency").addEventListener("focus", function() {
    if (this.value == "10000") {
      this.value = "";
    }
  });

    // 페이지에 노출되는 이벤트명
let event1 = "에너지";
let event2 = "교환코인: 블레이드오브 사일런스";
let event3 = "교환코인: 나머지";


// 기본값: 수정 필요하지 않음
  let price = 600;
  let probability1 = 0;
  let probability2 = 0;
  let probability3 = 0;

  function updateProbabilities(checkboxId) {
    const checkboxes = ['event1', 'event2', 'event3'];

    checkboxes.forEach(id => {
      if (id !== checkboxId) {
        document.getElementById(id).checked = false;
      }
    });

    if (document.getElementById(checkboxId).checked) {
      // Set probabilities based on the selected checkbox
      switch (checkboxId) {
        case 'event1': 
          probability1 = 0.3333;
          probability2 = 0.3333;
          probability3 = 0.3333;
          break;
        case 'event2': 
          probability1 = 0;
          probability2 = 0.5355;
          probability3 = 0;
          break;
        case 'event3': 
          probability1 = 0;
          probability2 = 0.4902;
          probability3 = 0;
          break;
        
        // 추가 이벤트들에 대해 case 추가 가능
      }
       calculateCoins();  // 이벤트가 선택될 때 바로 계산
      
    } else {
      // No checkbox selected, reset to default values
      probability1 = 0;
      probability2 = 0;
      probability3 = 0;
    }
  }

  function calculateCoins() {
  const gameCurrency = parseFloat(document.getElementById('gameCurrency').value);


  const numAttempts = 10 * gameCurrency / price;
  const resultElement = document.getElementById('result');
  const roundedCoins = Math.round(expectedCoins(numAttempts)); // 반올림 처리
  resultElement.innerHTML = `약 <span class="text-highlight">${Math.round(numAttempts)}회</span>의 시도가 가능하네요.<br>
  평균적으로 <span class="text-highlight">${roundedCoins}개</span>의 에너지·교환코인을 획득합니다!`;

}

    
  function expectedCoins(numAttempts) {
    const coins1 = 1 * numAttempts * probability1;
    const coins2 = 2 * numAttempts * probability2;
    const coins3 = 3 * numAttempts * probability3;

    const totalCoins = coins1 + coins2 + coins3;
    return totalCoins;
  }

    window.onload = calculateCoins;

 </script>
  

  
</body>
</html>
